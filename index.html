<html>
    <head>
        <script src="https://npmcdn.com/typescript"></script>
        <script src="ts2c.bundle.js"></script>

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.15.2/codemirror.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.15.2/codemirror.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.15.2/mode/javascript/javascript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.15.2/mode/clike/clike.min.js"></script>
    </head>
    <body>
        <textarea id="source" cols="50" rows="3">console.log("Hello world!");</textarea>
        <button onclick="transpile()">Transpile</button>
        <textarea id="target"></textarea>
        <script type="text/javascript">

            var sourceEditor = CodeMirror.fromTextArea(document.getElementById('source'), {
                lineNumbers: true,
                viewportMargin: Infinity,
                mode: 'javascript'
            });
            sourceEditor.setSize('auto', 'auto');

            var targetEditor = CodeMirror.fromTextArea(document.getElementById('target'), {
                lineNumbers: true,
                readOnly: true,
                viewportMargin: Infinity,
                mode: 'text/x-csrc'
            });
            targetEditor.setSize('auto', 'auto');

            function transpile()
            {
                var source = sourceEditor.getValue();
                var transpiled = ts2c.transpile(source);
                targetEditor.setValue(transpiled);
            }
        </script>
    </body>
</html>
